<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>动态规划 | 弱鸡的技术栈</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/coding/favicon.ico">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/katex.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/2.10.0/github-markdown.min.css">
    <meta name="description" content="不贪财，不失信，不自是，有此三省，自然人皆敬重">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/coding/assets/css/0.styles.7dafa1e0.css" as="style"><link rel="preload" href="/coding/assets/js/app.069c872b.js" as="script"><link rel="preload" href="/coding/assets/js/4.42152b27.js" as="script"><link rel="preload" href="/coding/assets/js/1.41496a03.js" as="script"><link rel="preload" href="/coding/assets/js/32.aab5bb1b.js" as="script"><link rel="prefetch" href="/coding/assets/js/10.4bf5156d.js"><link rel="prefetch" href="/coding/assets/js/11.189754c2.js"><link rel="prefetch" href="/coding/assets/js/12.48d5e44a.js"><link rel="prefetch" href="/coding/assets/js/13.613fee63.js"><link rel="prefetch" href="/coding/assets/js/14.ae065b90.js"><link rel="prefetch" href="/coding/assets/js/15.d3d82ae0.js"><link rel="prefetch" href="/coding/assets/js/16.d01d6e38.js"><link rel="prefetch" href="/coding/assets/js/17.b3da09ae.js"><link rel="prefetch" href="/coding/assets/js/18.1862387f.js"><link rel="prefetch" href="/coding/assets/js/19.2f762035.js"><link rel="prefetch" href="/coding/assets/js/20.5e609aa8.js"><link rel="prefetch" href="/coding/assets/js/21.e62dac87.js"><link rel="prefetch" href="/coding/assets/js/22.b2600812.js"><link rel="prefetch" href="/coding/assets/js/23.d5ed476f.js"><link rel="prefetch" href="/coding/assets/js/24.83c83943.js"><link rel="prefetch" href="/coding/assets/js/25.9f0aa9b4.js"><link rel="prefetch" href="/coding/assets/js/26.9093eeab.js"><link rel="prefetch" href="/coding/assets/js/27.390b22e0.js"><link rel="prefetch" href="/coding/assets/js/28.33c76a33.js"><link rel="prefetch" href="/coding/assets/js/29.8e8cb3ba.js"><link rel="prefetch" href="/coding/assets/js/3.c40dd5c5.js"><link rel="prefetch" href="/coding/assets/js/30.c7702a9a.js"><link rel="prefetch" href="/coding/assets/js/31.b20ebfc1.js"><link rel="prefetch" href="/coding/assets/js/33.b2fade93.js"><link rel="prefetch" href="/coding/assets/js/34.23e702d0.js"><link rel="prefetch" href="/coding/assets/js/35.f7d0cdb5.js"><link rel="prefetch" href="/coding/assets/js/36.fb018670.js"><link rel="prefetch" href="/coding/assets/js/37.84c0eb4b.js"><link rel="prefetch" href="/coding/assets/js/38.76586a0f.js"><link rel="prefetch" href="/coding/assets/js/39.103a982a.js"><link rel="prefetch" href="/coding/assets/js/40.1b77defc.js"><link rel="prefetch" href="/coding/assets/js/41.e45395ed.js"><link rel="prefetch" href="/coding/assets/js/42.87f8ba10.js"><link rel="prefetch" href="/coding/assets/js/43.5ca7b6a7.js"><link rel="prefetch" href="/coding/assets/js/44.fb1c4c71.js"><link rel="prefetch" href="/coding/assets/js/45.42e2edd4.js"><link rel="prefetch" href="/coding/assets/js/46.fd2f8e91.js"><link rel="prefetch" href="/coding/assets/js/47.8709be56.js"><link rel="prefetch" href="/coding/assets/js/48.99e324dc.js"><link rel="prefetch" href="/coding/assets/js/49.23ee39a4.js"><link rel="prefetch" href="/coding/assets/js/5.c2db4407.js"><link rel="prefetch" href="/coding/assets/js/50.631ea24f.js"><link rel="prefetch" href="/coding/assets/js/51.22d40916.js"><link rel="prefetch" href="/coding/assets/js/52.fd8aac12.js"><link rel="prefetch" href="/coding/assets/js/53.489ddc13.js"><link rel="prefetch" href="/coding/assets/js/54.c643a488.js"><link rel="prefetch" href="/coding/assets/js/55.d4c40e25.js"><link rel="prefetch" href="/coding/assets/js/56.631b236d.js"><link rel="prefetch" href="/coding/assets/js/57.27b581e6.js"><link rel="prefetch" href="/coding/assets/js/58.6b9c85fc.js"><link rel="prefetch" href="/coding/assets/js/59.f3f858ad.js"><link rel="prefetch" href="/coding/assets/js/6.b40a3f38.js"><link rel="prefetch" href="/coding/assets/js/60.02480d5f.js"><link rel="prefetch" href="/coding/assets/js/61.0d74f94b.js"><link rel="prefetch" href="/coding/assets/js/62.4cc956a6.js"><link rel="prefetch" href="/coding/assets/js/63.7687429c.js"><link rel="prefetch" href="/coding/assets/js/64.e3f82a7a.js"><link rel="prefetch" href="/coding/assets/js/65.09cd0e8a.js"><link rel="prefetch" href="/coding/assets/js/66.8a8f42af.js"><link rel="prefetch" href="/coding/assets/js/67.e86f4308.js"><link rel="prefetch" href="/coding/assets/js/68.9b3a762b.js"><link rel="prefetch" href="/coding/assets/js/69.c89c677f.js"><link rel="prefetch" href="/coding/assets/js/7.5337cb73.js"><link rel="prefetch" href="/coding/assets/js/70.9dc5daf7.js"><link rel="prefetch" href="/coding/assets/js/71.4ad34164.js"><link rel="prefetch" href="/coding/assets/js/72.1b70d5df.js"><link rel="prefetch" href="/coding/assets/js/73.1c86e495.js"><link rel="prefetch" href="/coding/assets/js/74.e999b25f.js"><link rel="prefetch" href="/coding/assets/js/75.8d8cdef2.js"><link rel="prefetch" href="/coding/assets/js/76.ccc8647f.js"><link rel="prefetch" href="/coding/assets/js/77.fddccb62.js"><link rel="prefetch" href="/coding/assets/js/78.eef3fdb8.js"><link rel="prefetch" href="/coding/assets/js/79.ad1ed0ed.js"><link rel="prefetch" href="/coding/assets/js/8.cab867fd.js"><link rel="prefetch" href="/coding/assets/js/80.4a2b1906.js"><link rel="prefetch" href="/coding/assets/js/81.689b7df3.js"><link rel="prefetch" href="/coding/assets/js/82.4ce4cffc.js"><link rel="prefetch" href="/coding/assets/js/83.f8bfc545.js"><link rel="prefetch" href="/coding/assets/js/9.0ebcf003.js">
    <link rel="stylesheet" href="/coding/assets/css/0.styles.7dafa1e0.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-19557b78><div data-v-19557b78><div id="loader-wrapper" class="loading-wrapper" data-v-d48f4d20 data-v-19557b78 data-v-19557b78><div class="loader-main" data-v-d48f4d20><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-64685f0e data-v-19557b78 data-v-19557b78><h3 class="title" style="display:none;" data-v-64685f0e data-v-64685f0e>弱鸡的技术栈</h3> <!----> <label id="box" class="inputBox" style="display:none;" data-v-64685f0e data-v-64685f0e><input type="password" value="" data-v-64685f0e> <span data-v-64685f0e>Konck! Knock!</span> <button data-v-64685f0e>OK</button></label> <div class="footer" style="display:none;" data-v-64685f0e data-v-64685f0e><span data-v-64685f0e><i class="iconfont reco-theme" data-v-64685f0e></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-64685f0e>vuePress-theme-reco</a></span> <span data-v-64685f0e><i class="iconfont reco-copyright" data-v-64685f0e></i> <a data-v-64685f0e><span data-v-64685f0e>Xiang Liu</span>
            
          <!---->
          2021
        </a></span></div></div> <div class="hide" data-v-19557b78><header class="navbar" data-v-19557b78><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/coding/" class="home-link router-link-active"><!----> <span class="site-name">弱鸡的技术栈</span></a> <div class="links"><!----> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/coding/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      罗里吧嗦
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/coding/2021/other/" class="nav-link"><i class="iconfont undefined"></i>
  测试
</a></li></ul></div></div><div class="nav-item"><a href="/coding/2021/algorithm/" class="nav-link router-link-active"><i class="iconfont reco-api"></i>
  算法
</a></div><div class="nav-item"><a href="/coding/2021/thesis/" class="nav-link"><i class="iconfont reco-tongzhi"></i>
  研究
</a></div><div class="nav-item"><a href="/coding/2021/ml/" class="nav-link"><i class="iconfont reco-douyin"></i>
  机器学习
</a></div><div class="nav-item"><a href="/coding/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  时间线
</a></div><div class="nav-item"><a href="/coding/2021/other/messageBoard.html" class="nav-link"><i class="iconfont reco-suggestion"></i>
  留言板
</a></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-19557b78></div> <aside class="sidebar" data-v-19557b78><div class="personal-info-wrapper" data-v-042e23d4><img src="/coding/avatar.svg" alt="author-avatar" class="personal-img" data-v-042e23d4> <h3 class="name" data-v-042e23d4>
    Xiang Liu
  </h3> <div class="num" data-v-042e23d4><div data-v-042e23d4><h3 data-v-042e23d4>36</h3> <h6 data-v-042e23d4>Article</h6></div> <div data-v-042e23d4><h3 data-v-042e23d4>10</h3> <h6 data-v-042e23d4>Tag</h6></div></div> <hr data-v-042e23d4></div> <nav class="nav-links"><div class="nav-item"><a href="/coding/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      罗里吧嗦
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/coding/2021/other/" class="nav-link"><i class="iconfont undefined"></i>
  测试
</a></li></ul></div></div><div class="nav-item"><a href="/coding/2021/algorithm/" class="nav-link router-link-active"><i class="iconfont reco-api"></i>
  算法
</a></div><div class="nav-item"><a href="/coding/2021/thesis/" class="nav-link"><i class="iconfont reco-tongzhi"></i>
  研究
</a></div><div class="nav-item"><a href="/coding/2021/ml/" class="nav-link"><i class="iconfont reco-douyin"></i>
  机器学习
</a></div><div class="nav-item"><a href="/coding/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  时间线
</a></div><div class="nav-item"><a href="/coding/2021/other/messageBoard.html" class="nav-link"><i class="iconfont reco-suggestion"></i>
  留言板
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>algorithm</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/coding/2021/algorithm/" aria-current="page" class="sidebar-link">介绍</a></li><li><a href="/coding/2021/algorithm/design.html" class="sidebar-link">设计题</a></li><li><a href="/coding/2021/algorithm/dp.html" aria-current="page" class="active sidebar-link">动态规划</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/coding/2021/algorithm/dp.html#_300-longest-increasing-subsequence" class="sidebar-link">300. Longest Increasing Subsequence</a></li><li class="sidebar-sub-header"><a href="/coding/2021/algorithm/dp.html#_354-russian-doll-envelopes" class="sidebar-link">354. Russian Doll Envelopes</a></li><li class="sidebar-sub-header"><a href="/coding/2021/algorithm/dp.html#_121-best-time-to-buy-and-sell-stock" class="sidebar-link">121. Best Time to Buy and Sell Stock</a></li><li class="sidebar-sub-header"><a href="/coding/2021/algorithm/dp.html#_122-best-time-to-buy-and-sell-stock-ii" class="sidebar-link">122.Best Time to Buy and Sell Stock II</a></li><li class="sidebar-sub-header"><a href="/coding/2021/algorithm/dp.html#_123-best-time-to-buy-and-sell-stock-iii" class="sidebar-link">123. Best Time to Buy and Sell Stock III</a></li><li class="sidebar-sub-header"><a href="/coding/2021/algorithm/dp.html#_309-best-time-to-buy-and-sell-stock-with-cooldown" class="sidebar-link">309. Best Time to Buy and Sell Stock with Cooldown</a></li><li class="sidebar-sub-header"><a href="/coding/2021/algorithm/dp.html#_714-best-time-to-buy-and-sell-stock-with-transaction-fee" class="sidebar-link">714. Best Time to Buy and Sell Stock with Transaction Fee</a></li><li class="sidebar-sub-header"><a href="/coding/2021/algorithm/dp.html#_322-coin-change" class="sidebar-link">322. Coin Change</a></li><li class="sidebar-sub-header"><a href="/coding/2021/algorithm/dp.html#_518-coin-change-2" class="sidebar-link">518. Coin Change 2</a></li><li class="sidebar-sub-header"><a href="/coding/2021/algorithm/dp.html#_416-partition-equal-subset-sum" class="sidebar-link">416. Partition Equal Subset Sum</a></li><li class="sidebar-sub-header"><a href="/coding/2021/algorithm/dp.html#_494-target-sum" class="sidebar-link">494. Target Sum</a></li><li class="sidebar-sub-header"><a href="/coding/2021/algorithm/dp.html#_474-ones-and-zeroes" class="sidebar-link">474. Ones and Zeroes</a></li><li class="sidebar-sub-header"><a href="/coding/2021/algorithm/dp.html#_923-3sum-with-multiplicity" class="sidebar-link">923. 3Sum With Multiplicity</a></li><li class="sidebar-sub-header"><a href="/coding/2021/algorithm/dp.html#_413-arithmetic-slices" class="sidebar-link">413. Arithmetic Slices</a></li><li class="sidebar-sub-header"><a href="/coding/2021/algorithm/dp.html#_1105-filling-bookcase-shelves" class="sidebar-link">1105. Filling Bookcase Shelves</a></li><li class="sidebar-sub-header"><a href="/coding/2021/algorithm/dp.html#_1246-palindrome-removal" class="sidebar-link">1246. Palindrome Removal</a></li></ul></li><li><a href="/coding/2021/algorithm/graph.html" class="sidebar-link">图 和 树</a></li><li><a href="/coding/2021/algorithm/linkedlist.html" class="sidebar-link">链表</a></li><li><a href="/coding/2021/algorithm/matrix.html" class="sidebar-link">矩阵</a></li><li><a href="/coding/2021/algorithm/search.html" class="sidebar-link">扫描法</a></li><li><a href="/coding/2021/algorithm/stack.html" class="sidebar-link">栈</a></li></ul></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-64685f0e data-v-19557b78><h3 class="title" style="display:none;" data-v-64685f0e data-v-64685f0e>动态规划</h3> <!----> <label id="box" class="inputBox" style="display:none;" data-v-64685f0e data-v-64685f0e><input type="password" value="" data-v-64685f0e> <span data-v-64685f0e>Konck! Knock!</span> <button data-v-64685f0e>OK</button></label> <div class="footer" style="display:none;" data-v-64685f0e data-v-64685f0e><span data-v-64685f0e><i class="iconfont reco-theme" data-v-64685f0e></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-64685f0e>vuePress-theme-reco</a></span> <span data-v-64685f0e><i class="iconfont reco-copyright" data-v-64685f0e></i> <a data-v-64685f0e><span data-v-64685f0e>Xiang Liu</span>
            
          <!---->
          2021
        </a></span></div></div> <div data-v-19557b78><main class="page"><div class="page-title" style="display:none;"><h1>动态规划</h1> <hr> <div data-v-34ea29db><i class="iconfont reco-account" data-v-34ea29db><span data-v-34ea29db>Xiang Liu</span></i> <i class="iconfont reco-date" data-v-34ea29db><span data-v-34ea29db>2021-01-14</span></i> <!----> <i class="iconfont reco-tag tags" data-v-34ea29db><span class="tag-item" data-v-34ea29db>Leetcode</span></i></div></div> <div class="theme-reco-content content__default" style="display:none;"><p><big>最长递增子序问题</big></p> <div class="custom-block right"><p>📦 数组的最长递增子序列, 一维, 二维, N维</p> <ul><li>300</li> <li>354</li> <li>435</li> <li>646</li> <li>452</li></ul></div> <div card="undefined" class="el-tabs el-tabs--top"><div class="el-tabs__header is-top"><div class="el-tabs__nav-wrap is-top"><div class="el-tabs__nav-scroll"><div role="tablist" class="el-tabs__nav is-top" style="transform:translateX(-0px);"><div class="el-tabs__active-bar is-top" style="width:0px;transform:translateX(0px);ms-transform:translateX(0px);webkit-transform:translateX(0px);"></div></div></div></div></div><div class="el-tabs__content"><div role="tabpanel" aria-hidden="true" id="pane-null" aria-labelledby="tab-null" class="el-tab-pane" style="display:none;"><h2 id="_300-longest-increasing-subsequence"><a href="#_300-longest-increasing-subsequence" class="header-anchor">#</a> 300. Longest Increasing Subsequence</h2> <div class="language- extra-class"><pre class="language-text"><code>Input: [10,9,2,5,3,7,101,18]
Output: 4 
Explanation: The longest increasing subsequence is [2,3,7,101], therefore the length is 4
</code></pre></div><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n^2)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>解法： <code>dp[i] = max(dp[i], dp[j] + 1 if Aj &lt; Ai) for j in 1:i</code></p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token triple-quoted-string string">&quot;&quot;&quot;生成下面这个DP数组
A   10 9  2  5  3  7  101  18
dp  1  1  1  2  2  3  4    4
&quot;&quot;&quot;</span>
<span class="token keyword">def</span> <span class="token function">lengthOfLIS</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> nums<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">int</span><span class="token punctuation">:</span>
    n <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token punctuation">;</span> dp <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">*</span>n
    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">if</span> nums<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">&lt;</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">:</span>
                dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token builtin">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">1</span> <span class="token operator">+</span> dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token builtin">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">)</span>
</code></pre></div><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mi>log</mi><mo>⁡</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n\log n)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span>解法： 相当于有一幅无序的扑克牌, 现在要从头遍历每一张牌并把他放在比它大的牌上面(如果有多个堆可以放, 放最左边上面), 如果没有比它大的牌堆, 则在最右边新加一个牌堆, 最后堆的数量就是答案</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token triple-quoted-string string">&quot;&quot;&quot;过程如下, 扑克牌优先放靠左边的堆, 我要找最小的 i 使得 top[i] &gt; poker
    2       
    9       3               18
    10      5       7       101
&quot;&quot;&quot;</span>
<span class="token keyword">def</span> <span class="token function">lengthOfLIS</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> nums<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">int</span><span class="token punctuation">:</span>
    <span class="token comment"># 对二分搜索自己还不是很熟练</span>
    piles<span class="token punctuation">,</span> top <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> n <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span>
    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>
        poker <span class="token operator">=</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
        l<span class="token punctuation">,</span> r <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> piles <span class="token operator">-</span> <span class="token number">1</span>
        <span class="token keyword">while</span> l <span class="token operator">&lt;</span> r<span class="token punctuation">:</span>
            mid <span class="token operator">=</span> <span class="token punctuation">(</span>l <span class="token operator">+</span> r<span class="token punctuation">)</span> <span class="token operator">&gt;&gt;</span> <span class="token number">1</span>
            <span class="token keyword">if</span> poker <span class="token operator">&lt;=</span> top<span class="token punctuation">[</span>mid<span class="token punctuation">]</span><span class="token punctuation">:</span>   r <span class="token operator">=</span> mid
            <span class="token keyword">else</span><span class="token punctuation">:</span>                   l <span class="token operator">=</span> mid <span class="token operator">+</span> <span class="token number">1</span>
        <span class="token keyword">if</span> top <span class="token keyword">and</span> top<span class="token punctuation">[</span>l<span class="token punctuation">]</span> <span class="token operator">&gt;=</span> poker<span class="token punctuation">:</span>
            top<span class="token punctuation">[</span>l<span class="token punctuation">]</span> <span class="token operator">=</span> poker
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            piles <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span> top<span class="token punctuation">.</span>append<span class="token punctuation">(</span>poker<span class="token punctuation">)</span>
    <span class="token keyword">return</span> piles
</code></pre></div></div> <div role="tabpanel" aria-hidden="true" id="pane-null" aria-labelledby="tab-null" class="el-tab-pane" style="display:none;"><h2 id="_354-russian-doll-envelopes"><a href="#_354-russian-doll-envelopes" class="header-anchor">#</a> 354. Russian Doll Envelopes</h2> <div class="language- extra-class"><pre class="language-text"><code>Input: envelopes = [[5,4],[6,4],[6,7],[2,3]]
Output: 3
Explanation: The maximum number of envelopes you can Russian doll is 3 ([2,3] =&gt; [5,4] =&gt; [6,7])
</code></pre></div><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n^2)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>做法：还是和之前那道题一样, 第一维度递增, 第二维度递减, 这样避免了<code>[4,6], [4,7]</code>被算成套娃的情况, 实际上由于第一维度相同, 这是不被允许的</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token triple-quoted-string string">&quot;&quot;&quot;
1. 如果第二维度也递增
[[2, 3], [5, 4], [6, 5], [6, 7]] =&gt; [3,4,5,7] 得到ans=4, 显然不对
2. 如果第二维度递减
[[2, 3], [5, 4], [6, 7], [6, 5]] =&gt; [3,4,7,5] 得到ans=3, 答案可以
&quot;&quot;&quot;</span>
<span class="token keyword">def</span> <span class="token function">maxEnvelopes</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> envelopes<span class="token punctuation">:</span> List<span class="token punctuation">[</span>List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">int</span><span class="token punctuation">:</span>
    n <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>envelopes<span class="token punctuation">)</span><span class="token punctuation">;</span> res<span class="token punctuation">,</span> dp <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">*</span> n
    envelopes<span class="token punctuation">.</span>sort<span class="token punctuation">(</span>key<span class="token operator">=</span><span class="token keyword">lambda</span> x<span class="token punctuation">:</span> <span class="token punctuation">(</span>x<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token operator">-</span>x<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>N<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">if</span> envelopes<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span> envelopes<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
                dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token builtin">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token builtin">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">)</span>
</code></pre></div><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mi>log</mi><mo>⁡</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n\log n)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span>做法： 和之前一样, 第二维度就是一个最长递增子序问题, 所以在第二维度降序排列后, 可以用二分搜索加速</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">maxEnvelopes</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> envelopes<span class="token punctuation">:</span> List<span class="token punctuation">[</span>List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">int</span><span class="token punctuation">:</span>
    n <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>envelopes<span class="token punctuation">)</span><span class="token punctuation">;</span> piles<span class="token punctuation">,</span> top <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    envelopes<span class="token punctuation">.</span>sort<span class="token punctuation">(</span>key<span class="token operator">=</span><span class="token keyword">lambda</span> x<span class="token punctuation">:</span> <span class="token punctuation">(</span>x<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token operator">-</span>x<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>
        poker <span class="token operator">=</span> envelopes<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
        l<span class="token punctuation">,</span> r <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> piles <span class="token operator">-</span> <span class="token number">1</span>
        <span class="token keyword">while</span> l <span class="token operator">&lt;</span> r<span class="token punctuation">:</span>
            mid <span class="token operator">=</span> <span class="token punctuation">(</span>l <span class="token operator">+</span> r<span class="token punctuation">)</span> <span class="token operator">&gt;&gt;</span> <span class="token number">1</span>
            <span class="token keyword">if</span> top<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">&gt;=</span> poker<span class="token punctuation">:</span>      r <span class="token operator">=</span> mid
            <span class="token keyword">else</span><span class="token punctuation">:</span>                      l <span class="token operator">=</span> mid <span class="token operator">+</span> <span class="token number">1</span>
        <span class="token keyword">if</span> top <span class="token keyword">and</span> top<span class="token punctuation">[</span>l<span class="token punctuation">]</span> <span class="token operator">&gt;=</span> poker<span class="token punctuation">:</span>    <span class="token comment">#是等于, 因为我们尽可能减少堆数, 相等不能增加堆</span>
            top<span class="token punctuation">[</span>l<span class="token punctuation">]</span> <span class="token operator">=</span> poker
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            piles <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span> top<span class="token punctuation">.</span>append<span class="token punctuation">(</span>poker<span class="token punctuation">)</span>
    <span class="token keyword">return</span> piles
</code></pre></div></div></div></div> <hr><p><big>股票问题</big></p> <div class="custom-block right"><p>📦 怎么买卖赚钱最多</p> <ul><li>121</li> <li>123</li> <li>309</li> <li>122</li> <li>188</li> <li>714</li></ul></div> <p>定义一个三维数组, <code>dp[i][j][k]</code>代表第<code>i</code>天第<code>j</code>次交易(先买再卖算一次), 最后手里是否持有股票<code>k</code>所持有的总利润</p> <div class="language- extra-class"><pre class="language-text"><code>dp[i][j][0] = max(dp[i-1][j][0], dp[i-1][j][1] + prices[i])
dp[i][j][1] = max(dp[i-1][j][1], dp[i-1][j-1][0] - prices[i])
</code></pre></div><ul><li>第<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.65952em;vertical-align:0em;"></span><span class="mord mathnormal">i</span></span></span></span>天我没有持有股票, 要么是我昨天就没有持有, 今天继续闲着; 要么是我昨天持有股票, 今天卖掉, 所以我今天没有持有股票了</li> <li>第<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.65952em;vertical-align:0em;"></span><span class="mord mathnormal">i</span></span></span></span>天我持有股票, 要么我昨天就持有着股票, 今天继续闲着; 要么是我昨天没有持有股票, 今天买入一股, 今天才持有股票</li></ul> <div card="undefined" class="el-tabs el-tabs--top"><div class="el-tabs__header is-top"><div class="el-tabs__nav-wrap is-top"><div class="el-tabs__nav-scroll"><div role="tablist" class="el-tabs__nav is-top" style="transform:translateX(-0px);"><div class="el-tabs__active-bar is-top" style="width:0px;transform:translateX(0px);ms-transform:translateX(0px);webkit-transform:translateX(0px);"></div></div></div></div></div><div class="el-tabs__content"><div role="tabpanel" aria-hidden="true" id="pane-null" aria-labelledby="tab-null" class="el-tab-pane" style="display:none;"><h2 id="_121-best-time-to-buy-and-sell-stock"><a href="#_121-best-time-to-buy-and-sell-stock" class="header-anchor">#</a> 121. Best Time to Buy and Sell Stock</h2> <p><strong>问题</strong>： 可以在某一天购入一股, 之后卖掉, 求最大收益</p> <div class="language- extra-class"><pre class="language-text"><code>Input: [7,1,5,3,6,4]
Output: 5
Explanation: Buy on day 2 (price = 1) and sell on day 5 (price = 6), profit = 6-1 = 5.
</code></pre></div><details class="custom-block details"><summary>See More</summary> <div class="language- extra-class"><pre class="language-text"><code>因为只能进行一次交易, 因为dp[n][0][0] = 0(一次交易没发生, 且没有购买行为),
所以状态转移同交易次数无关

dp[i][0] = max(dp[i-1][0], dp[i-1][1] + prices[i])
dp[i][1] = max(dp[i-1][1], dp[i-1][0] - prices[i]) 
            = max(dp[i-1][1], 0-prices[i])       
</code></pre></div><p>同样我们发现状态转移只和昨天是否持有股票有关系, 因而可以进一步用两个变量来代替数组</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token triple-quoted-string string">&quot;&quot;&quot;其实直接用当前数字减去之前遇到的最小数字即可
dp0: 此刻手里没有股票的最大收益
dp1: 此刻手里有股票的最大收益
&quot;&quot;&quot;</span>
<span class="token keyword">def</span> <span class="token function">maxProfit</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> prices<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">int</span><span class="token punctuation">:</span>
    dp0<span class="token punctuation">,</span> dp1 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token builtin">float</span><span class="token punctuation">(</span><span class="token string">'inf'</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> price <span class="token keyword">in</span> prices<span class="token punctuation">:</span>
        dp0 <span class="token operator">=</span> <span class="token builtin">max</span><span class="token punctuation">(</span>dp0<span class="token punctuation">,</span> dp1<span class="token operator">+</span>price<span class="token punctuation">)</span>
        dp1 <span class="token operator">=</span> <span class="token builtin">max</span><span class="token punctuation">(</span>dp1<span class="token punctuation">,</span> <span class="token operator">-</span>price<span class="token punctuation">)</span>
    <span class="token keyword">return</span> dp0
</code></pre></div></details></div> <div role="tabpanel" aria-hidden="true" id="pane-null" aria-labelledby="tab-null" class="el-tab-pane" style="display:none;"><h2 id="_122-best-time-to-buy-and-sell-stock-ii"><a href="#_122-best-time-to-buy-and-sell-stock-ii" class="header-anchor">#</a> 122.Best Time to Buy and Sell Stock II</h2> <p><strong>问题</strong>： 可以进行多次交易</p> <div class="language- extra-class"><pre class="language-text"><code>Input: [7,1,5,3,6,4]
Output: 7
Explanation: Buy on day 2 (price = 1) and sell on day 3 (price = 5), profit = 5-1 = 4. 
Then buy on day 4 (price = 3) and sell on day 5 (price = 6), profit = 6-3 = 3.
</code></pre></div><details class="custom-block details"><summary>See More</summary> <div class="language- extra-class"><pre class="language-text"><code>在这道题中, k是正无穷的, 那么就可以认为 k 和 k - 1 是一样的, 因此第二个维度没意义

dp[i][0] = max(dp[i-1][0], dp[i-1][1] + prices[i])
dp[i][1] = max(dp[i-1][1], dp[i-1][0] - prices[i]) 
</code></pre></div><p>同样我们发现状态转移只和昨天是否持有股票有关系, 因而可以进一步用两个变量来代替数组, 但是在更新第二个变量的时候用的是第一个变量更新前的结果</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">maxProfit</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> prices<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">int</span><span class="token punctuation">:</span>
    dp0<span class="token punctuation">,</span> dp1 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token builtin">float</span><span class="token punctuation">(</span><span class="token string">'inf'</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> price <span class="token keyword">in</span> prices<span class="token punctuation">:</span>
        old_dp0 <span class="token operator">=</span> dp0
        dp0 <span class="token operator">=</span> <span class="token builtin">max</span><span class="token punctuation">(</span>dp0<span class="token punctuation">,</span> dp1<span class="token operator">+</span>price<span class="token punctuation">)</span>
        dp1 <span class="token operator">=</span> <span class="token builtin">max</span><span class="token punctuation">(</span>dp1<span class="token punctuation">,</span> old_dp0<span class="token operator">-</span>price<span class="token punctuation">)</span>
    <span class="token keyword">return</span> dp0
</code></pre></div></details></div> <div role="tabpanel" aria-hidden="true" id="pane-null" aria-labelledby="tab-null" class="el-tab-pane" style="display:none;"><h2 id="_123-best-time-to-buy-and-sell-stock-iii"><a href="#_123-best-time-to-buy-and-sell-stock-iii" class="header-anchor">#</a> 123. Best Time to Buy and Sell Stock III</h2> <p><strong>问题</strong>： 最多两次交易</p> <div class="language- extra-class"><pre class="language-text"><code>Input: [3,3,5,0,0,3,1,4]
Output: 6
Explanation: Buy on day 4 (price = 0) and sell on day 6 (price = 3), profit = 3-0 = 3. 
Then buy on day 7 (price = 1) and sell on day 8 (price = 4), profit = 4-1 = 3.
You can only do 2 trades !
</code></pre></div><details class="custom-block details"><summary>See More</summary> <div class="language- extra-class"><pre class="language-text"><code>在这道题中, 交易次数有限制并且 j = 2, 所以要考虑第二个维度(穷举k=2,k=1次交易的情况)

dp[i][j][0] = max(dp[i-1][j][0], dp[i-1][j][1] + prices[i])
dp[i][j][1] = max(dp[i-1][j][1], dp[i-1][j-1][0] - prices[i]) 
</code></pre></div><p>用二维数组避免出错, 主要就是注意一下买的时候, 是否已经超过两次交易了, 然后状态更新的顺序从后往前</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">maxProfit</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> prices<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">int</span><span class="token punctuation">:</span>
    <span class="token comment"># dp: time x trade</span>
    dp0 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">*</span><span class="token number">3</span> <span class="token keyword">for</span> _ <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
    dp1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token builtin">float</span><span class="token punctuation">(</span><span class="token string">'inf'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">*</span><span class="token number">3</span> <span class="token keyword">for</span> _ <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
    <span class="token keyword">for</span> price <span class="token keyword">in</span> prices<span class="token punctuation">:</span>
        <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            dp0<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token builtin">max</span><span class="token punctuation">(</span>dp0<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> dp1<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">+</span>price<span class="token punctuation">)</span>
            dp1<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token builtin">max</span><span class="token punctuation">(</span>dp1<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> dp0<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">-</span>price<span class="token punctuation">)</span>
            dp0<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span>dp1<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> dp0<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span>dp1<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span>
    <span class="token keyword">return</span> dp0<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span>
</code></pre></div></details></div> <div role="tabpanel" aria-hidden="true" id="pane-null" aria-labelledby="tab-null" class="el-tab-pane" style="display:none;"><p><strong>问题</strong>： 最多<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span>次交易</p> <div class="language- extra-class"><pre class="language-text"><code>Input: [2,4,1], k = 2
Output: 2
Explanation: Buy on day 1 (price = 2) and sell on day 2 (price = 4), profit = 4-2 = 2.
</code></pre></div><details class="custom-block details"><summary>See More</summary> <p>和上面那道题的模板一模一样, 只是要注意有个special case, <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>K</mi></mrow><annotation encoding="application/x-tex">K</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">K</span></span></span></span>的值非常大, 导致内存超出, 解决的办法就是加约束条件： <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>K</mi><mo>≤</mo><mi>N</mi><mi mathvariant="normal">/</mi><mn>2</mn></mrow><annotation encoding="application/x-tex">K \leq N/2</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.8193em;vertical-align:-0.13597em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mord">/</span><span class="mord">2</span></span></span></span>, 因为每次交易要至少两个阶段才能完成</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">maxProfit</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> k<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">,</span> prices<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">int</span><span class="token punctuation">:</span>
    <span class="token keyword">if</span> <span class="token keyword">not</span> prices<span class="token punctuation">:</span> <span class="token keyword">return</span> <span class="token number">0</span>
    n <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>prices<span class="token punctuation">)</span><span class="token punctuation">;</span> max_k <span class="token operator">=</span> <span class="token builtin">min</span><span class="token punctuation">(</span>k<span class="token punctuation">,</span> n<span class="token operator">//</span><span class="token number">2</span><span class="token punctuation">)</span>
    dp <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">*</span><span class="token number">2</span> <span class="token keyword">for</span> _ <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>max_k<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token keyword">for</span> _ <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">]</span>
    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">for</span> k <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>max_k<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">if</span> i <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>       <span class="token comment">#特殊情况处理一下</span>
                dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token builtin">float</span><span class="token punctuation">(</span><span class="token string">'inf'</span><span class="token punctuation">)</span>   
            dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token builtin">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> prices<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
            dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token builtin">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>k<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">-</span> prices<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> dp<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
</code></pre></div></details></div> <div role="tabpanel" aria-hidden="true" id="pane-null" aria-labelledby="tab-null" class="el-tab-pane" style="display:none;"><h2 id="_309-best-time-to-buy-and-sell-stock-with-cooldown"><a href="#_309-best-time-to-buy-and-sell-stock-with-cooldown" class="header-anchor">#</a> 309. Best Time to Buy and Sell Stock with Cooldown</h2> <p><strong>问题</strong>： 在买入之前必须至少休息一天, 还是无限交易次数</p> <div class="language- extra-class"><pre class="language-text"><code>Input: [7,1,5,1,6,4]
Output: 5
Explanation: Buy on day 2 (price = 1) and sell on day 5 (price = 6), profit =6-1 = 5. 
cannot sell on day 3 and buy again on day 4
</code></pre></div><details class="custom-block details"><summary>See More</summary> <div class="language- extra-class"><pre class="language-text"><code>在这道题中, 交易次数无限制, 所以第二个维度还是没有意义
然后cooldown的话, 限制了买入行为, 即必须从dp[i-2][0]那里获得之前无持有状态的最佳利润

dp[i][0] = max(dp[i-1][0], dp[i-1][1] + prices[i])
dp[i][1] = max(dp[i-1][1], dp[i-2][0] - prices[i]) 
</code></pre></div><p>无持有必须保存<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">t-1</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.69841em;vertical-align:-0.08333em;"></span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>和<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi><mo>−</mo><mn>2</mn></mrow><annotation encoding="application/x-tex">t-2</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.69841em;vertical-align:-0.08333em;"></span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span></span></span></span>的信息, 而持有仅须保存<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">t-1</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.69841em;vertical-align:-0.08333em;"></span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>的信息</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token triple-quoted-string string">&quot;&quot;&quot;比如 input = [1,2,3,0,2]

&gt;&gt; p=1      dp0=[0,0,0]     dp1=-1       
&gt;&gt; p=2      dp0=[0,0,1]     dp1=-1
&gt;&gt; p=3      dp0=[0,1,2]     dp1=-1    每次把dp0[1,2]搬运到dp0[0,1]
&gt;&gt; p=0      dp0=[1,2,2]     dp1= 1
&gt;&gt; p=2      dp0=[2,2,?]     dp1= 1    ?=3, 因为第1,2天完成一次, 第4天已经可以继续买了
&quot;&quot;&quot;</span>
<span class="token keyword">def</span> <span class="token function">maxProfit</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> prices<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">int</span><span class="token punctuation">:</span>
    dp0 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token number">3</span>
    dp1 <span class="token operator">=</span> <span class="token operator">-</span><span class="token builtin">float</span><span class="token punctuation">(</span><span class="token string">'inf'</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> i<span class="token punctuation">,</span> price <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>prices<span class="token punctuation">)</span><span class="token punctuation">:</span>
        dp0<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> dp0<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> dp0<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> dp0<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
        dp0<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token builtin">max</span><span class="token punctuation">(</span>dp0<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> dp1 <span class="token operator">+</span> price<span class="token punctuation">)</span>
        dp1 <span class="token operator">=</span> <span class="token builtin">max</span><span class="token punctuation">(</span>dp1<span class="token punctuation">,</span> dp0<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">-</span> price<span class="token punctuation">)</span>
    <span class="token keyword">return</span> dp0<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>
</code></pre></div></details></div> <div role="tabpanel" aria-hidden="true" id="pane-null" aria-labelledby="tab-null" class="el-tab-pane" style="display:none;"><h2 id="_714-best-time-to-buy-and-sell-stock-with-transaction-fee"><a href="#_714-best-time-to-buy-and-sell-stock-with-transaction-fee" class="header-anchor">#</a> 714. Best Time to Buy and Sell Stock with Transaction Fee</h2> <p><strong>问题</strong>： 没有冷冻期, 但是每次交易都要交一个手续费</p> <div class="language- extra-class"><pre class="language-text"><code>Input: [1,2,4,0,2], fee=2
Output: 1
Explanation: Buy on day 1 and sell on day 3, get profit of 1
</code></pre></div><details class="custom-block details"><summary>See More</summary> <div class="language- extra-class"><pre class="language-text"><code>在这道题中, 交易次数无限制, 所以第二个维度还是没有意义
有手续费相当于卖的时候多交一笔钱, 注意fee加到上面会存在dp1不能再减小的问题

dp[i][0] = max(dp[i-1][0], dp[i-1][1] + prices[i])
dp[i][1] = max(dp[i-1][1], dp[i-1][0] - prices[i]-fee) 
</code></pre></div><p>用两个变量来代替数组, 在更新第二个变量的时候用的是第一个变量更新前的结果</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">maxProfit</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> prices<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">,</span> fee<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">int</span><span class="token punctuation">:</span>
    dp0<span class="token punctuation">,</span> dp1 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token builtin">float</span><span class="token punctuation">(</span><span class="token string">'inf'</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> price <span class="token keyword">in</span> prices<span class="token punctuation">:</span>
        old_dp0 <span class="token operator">=</span> dp0
        dp0 <span class="token operator">=</span> <span class="token builtin">max</span><span class="token punctuation">(</span>dp0<span class="token punctuation">,</span> dp1<span class="token operator">+</span>price<span class="token punctuation">)</span>
        dp1 <span class="token operator">=</span> <span class="token builtin">max</span><span class="token punctuation">(</span>dp1<span class="token punctuation">,</span> old_dp0 <span class="token operator">-</span> price <span class="token operator">-</span> fee<span class="token punctuation">)</span>
    <span class="token keyword">return</span> dp0
</code></pre></div></details></div></div></div> <hr><p><big>背包问题</big></p> <div class="custom-block right"><p>📦 怎么尽可能在有限空间的背包里尽可能多地装货</p> <ul><li>473</li> <li>279</li></ul></div> <div class="custom-block tip"><div card="undefined" class="el-tabs el-tabs--top"><div class="el-tabs__header is-top"><div class="el-tabs__nav-wrap is-top"><div class="el-tabs__nav-scroll"><div role="tablist" class="el-tabs__nav is-top" style="transform:translateX(-0px);"><div class="el-tabs__active-bar is-top" style="width:0px;transform:translateX(0px);ms-transform:translateX(0px);webkit-transform:translateX(0px);"></div></div></div></div></div><div class="el-tabs__content"><div role="tabpanel" aria-hidden="true" id="pane-null" aria-labelledby="tab-null" class="el-tab-pane" style="display:none;"><h2 id="_322-coin-change"><a href="#_322-coin-change" class="header-anchor">#</a> 322. Coin Change</h2> <p><strong>问题</strong>: 用最少的硬币凑齐领钱(amount)</p> <p><strong>例子</strong>: 比如 &quot;coins = [1, 2, 5], amount = 11&quot; 答案是最少三枚硬币就可以搞定, 所以返回<code>3</code>, 如果搞不定返回<code>-1</code></p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 动态规划, 清晰明了, 比如 coins = [2,5,1]</span>

dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span>    <span class="token number">0</span>   <span class="token number">1</span>   <span class="token number">2</span>   <span class="token number">3</span>   <span class="token number">4</span>   <span class="token number">5</span>   <span class="token number">6</span>   <span class="token number">7</span>   <span class="token number">8</span>   <span class="token number">9</span>  <span class="token number">10</span>  <span class="token number">11</span>
<span class="token function">add</span> <span class="token number">2</span>    <span class="token number">0</span>  <span class="token number">12</span>   <span class="token number">1</span>  <span class="token number">12</span>   <span class="token number">2</span>  <span class="token number">12</span>   <span class="token number">3</span>  <span class="token number">12</span>   <span class="token number">4</span>  <span class="token number">12</span>   <span class="token number">5</span>  <span class="token number">12</span>
<span class="token function">add</span> <span class="token number">5</span>    <span class="token number">0</span>  <span class="token number">12</span>   <span class="token number">1</span>  <span class="token number">12</span>   <span class="token number">2</span>   <span class="token number">1</span>   <span class="token number">3</span>   <span class="token number">2</span>   <span class="token number">4</span>   <span class="token number">3</span>   <span class="token number">2</span>  <span class="token number">12</span>
<span class="token function">add</span> <span class="token number">1</span>    <span class="token number">0</span>   <span class="token number">1</span>   <span class="token number">1</span>   <span class="token number">2</span>   <span class="token number">2</span>   <span class="token number">3</span>   <span class="token number">2</span>   <span class="token number">2</span>   <span class="token number">3</span>   <span class="token number">3</span>   <span class="token number">2</span>   <span class="token number">3</span>
</code></pre></div><div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">coinChange</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> coins<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">,</span> amount<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">int</span><span class="token punctuation">:</span>
    dp <span class="token operator">=</span> <span class="token punctuation">[</span>amount<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token punctuation">(</span>amount <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span>
    <span class="token keyword">for</span> coin <span class="token keyword">in</span> coins<span class="token punctuation">:</span>
        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>coin<span class="token punctuation">,</span> amount<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token builtin">min</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>i<span class="token operator">-</span>coin<span class="token punctuation">]</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token keyword">if</span> dp<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">==</span> amount<span class="token operator">+</span><span class="token number">1</span> <span class="token keyword">else</span> dp<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> 
</code></pre></div></div> <div role="tabpanel" aria-hidden="true" id="pane-null" aria-labelledby="tab-null" class="el-tab-pane" style="display:none;"><h2 id="_518-coin-change-2"><a href="#_518-coin-change-2" class="header-anchor">#</a> 518. Coin Change 2</h2> <p><strong>问题</strong>： 和上面那道题差不多, 只是问你要凑够<code>amount</code>, 用手里这堆硬币, 总共有多少种不同组合方式</p> <p><strong>例子</strong>： 比如之前那个例子总共有11种方式凑到那个数</p> <div class="language-bash extra-class"><pre class="language-bash"><code>
<span class="token comment"># 动态规划, 清晰明了, 比如 coins = [2,5,1]</span>
<span class="token comment"># - 还没更新的dp[i]代表不add当前这个coin时的答案</span>
<span class="token comment"># - dp[i-coin]代表答案中必须包含当前这个coin的答案个数</span>

dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span>    <span class="token number">0</span>   <span class="token number">1</span>   <span class="token number">2</span>   <span class="token number">3</span>   <span class="token number">4</span>   <span class="token number">5</span>   <span class="token number">6</span>   <span class="token number">7</span>   <span class="token number">8</span>   <span class="token number">9</span>  <span class="token number">10</span>  <span class="token number">11</span>
<span class="token function">add</span> <span class="token number">2</span>    <span class="token number">1</span>   <span class="token number">0</span>   <span class="token number">1</span>   <span class="token number">0</span>   <span class="token number">1</span>   <span class="token number">0</span>   <span class="token number">1</span>   <span class="token number">0</span>   <span class="token number">1</span>   <span class="token number">0</span>   <span class="token number">1</span>   <span class="token number">0</span>
<span class="token function">add</span> <span class="token number">5</span>    <span class="token number">1</span>   <span class="token number">0</span>   <span class="token number">1</span>   <span class="token number">0</span>   <span class="token number">1</span>   <span class="token number">1</span>   <span class="token number">1</span>   <span class="token number">1</span>   <span class="token number">1</span>   <span class="token number">1</span>   <span class="token number">2</span>   <span class="token number">0</span>
<span class="token function">add</span> <span class="token number">1</span>    <span class="token number">1</span>   <span class="token number">1</span>   <span class="token number">2</span>   <span class="token number">2</span>   <span class="token number">3</span>   <span class="token number">4</span>   <span class="token number">6</span>   <span class="token number">7</span>   <span class="token number">8</span>   <span class="token number">9</span>  <span class="token number">11</span>  <span class="token number">11</span>
</code></pre></div><div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">change</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> amount<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">,</span> coins<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">int</span><span class="token punctuation">:</span>
    dp <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token punctuation">(</span>amount <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span>
    <span class="token keyword">for</span> coin <span class="token keyword">in</span> coins<span class="token punctuation">:</span>
        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>coin<span class="token punctuation">,</span> amount<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+=</span> dp<span class="token punctuation">[</span>i<span class="token operator">-</span>coin<span class="token punctuation">]</span>
    <span class="token keyword">return</span> dp<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>
</code></pre></div></div> <div role="tabpanel" aria-hidden="true" id="pane-null" aria-labelledby="tab-null" class="el-tab-pane" style="display:none;"><h2 id="_416-partition-equal-subset-sum"><a href="#_416-partition-equal-subset-sum" class="header-anchor">#</a> 416. Partition Equal Subset Sum</h2> <p><strong>问题</strong>： 判断是否可以把一组数字分成两堆，两堆数字的和相等</p> <p><strong>例子</strong>： &quot;[1, 2, 3, 8]&quot;, 不可以分成相等的两堆, 返回FALSE</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 动态规划, 清晰明了, 比如 nums=[3, 1, 2, 8]</span>
<span class="token comment"># - dp[i]代表不加当前num情况下, total=i是否凑得齐</span>
<span class="token comment"># - dp[i-num]代表这一堆一定包含当前num的情况下, total=i是否凑得齐</span>

dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span>    <span class="token number">0</span>   <span class="token number">1</span>   <span class="token number">2</span>   <span class="token number">3</span>   <span class="token number">4</span>   <span class="token number">5</span>   <span class="token number">6</span>   <span class="token number">7</span>
<span class="token function">add</span> <span class="token number">3</span>    T   F   F   T   F   F   F   F 
<span class="token function">add</span> <span class="token number">1</span>    T   T   F   T   T   F   F   F 
<span class="token function">add</span> <span class="token number">2</span>    T   T   T   T   T   T   T   F 
</code></pre></div><div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">canPartition</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> nums<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">bool</span><span class="token punctuation">:</span>
    target <span class="token operator">=</span> <span class="token builtin">sum</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span>
    <span class="token keyword">if</span> target <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">:</span> <span class="token keyword">return</span> <span class="token boolean">False</span>
    target <span class="token operator">=</span> target <span class="token operator">&gt;&gt;</span> <span class="token number">1</span>
    dp <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token boolean">False</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token punctuation">(</span>target <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">True</span>
    <span class="token keyword">for</span> num <span class="token keyword">in</span> nums<span class="token punctuation">:</span>
        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> num<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">|</span><span class="token operator">=</span> dp<span class="token punctuation">[</span>i<span class="token operator">-</span>num<span class="token punctuation">]</span>
    <span class="token keyword">return</span> dp<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>
</code></pre></div></div> <div role="tabpanel" aria-hidden="true" id="pane-null" aria-labelledby="tab-null" class="el-tab-pane" style="display:none;"><h2 id="_494-target-sum"><a href="#_494-target-sum" class="header-anchor">#</a> 494. Target Sum</h2> <p><strong>问题</strong>： 给定一个数组, 每一个数字前面可以加＋或者－, 然后加起来要等于一个给定的数字, 请问有多少种不同的assignment(这些符号)</p> <p><strong>例子</strong>： <code>nums=[1, 1, 1, 1, 1], S=3</code>, 一共有5种, 其实就是&quot;(sum(nums)-S) / 2&quot;作为背包的负载, 然后看有多少个加和可能</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># 也是保持从后往前更新, 因为一个数字只能使用一次</span>
<span class="token keyword">def</span> <span class="token function">findTargetSumWays</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> nums<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">,</span> S<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">int</span><span class="token punctuation">:</span>
    target <span class="token operator">=</span> <span class="token builtin">sum</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span> <span class="token operator">-</span> S
    <span class="token keyword">if</span> target <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">1</span> <span class="token keyword">or</span> target <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">:</span> <span class="token keyword">return</span> <span class="token number">0</span>
    target <span class="token operator">=</span> target <span class="token operator">&gt;&gt;</span> <span class="token number">1</span>
    dp <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token punctuation">(</span>target <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span>
    <span class="token keyword">for</span> num <span class="token keyword">in</span> nums<span class="token punctuation">:</span>
        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> num<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+=</span> dp<span class="token punctuation">[</span>i<span class="token operator">-</span>num<span class="token punctuation">]</span>
    <span class="token keyword">return</span> dp<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token keyword">or</span> <span class="token number">0</span>
</code></pre></div></div> <div role="tabpanel" aria-hidden="true" id="pane-null" aria-labelledby="tab-null" class="el-tab-pane" style="display:none;"><h2 id="_474-ones-and-zeroes"><a href="#_474-ones-and-zeroes" class="header-anchor">#</a> 474. Ones and Zeroes</h2> <p><strong>问题</strong>： 我们现在从数组中每个字符串都有一些<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn></mrow><annotation encoding="application/x-tex">0</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span></span></span></span>和<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>, 问给了<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi></mrow><annotation encoding="application/x-tex">m</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">m</span></span></span></span>个<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn></mrow><annotation encoding="application/x-tex">0</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span></span></span></span>, <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">n</span></span></span></span>个<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>, 从数组中取出最多的字符串,这些字符串中1和0的出现次数之和不超过<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi><mo separator="true">,</mo><mi>n</mi></mrow><annotation encoding="application/x-tex">m,n</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathnormal">m</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">n</span></span></span></span></p> <div class="language-bash extra-class"><pre class="language-bash"><code>输入：strs <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;10&quot;</span>, <span class="token string">&quot;0001&quot;</span>, <span class="token string">&quot;111001&quot;</span>, <span class="token string">&quot;1&quot;</span>, <span class="token string">&quot;0&quot;</span><span class="token punctuation">]</span>, m <span class="token operator">=</span> <span class="token number">5</span>, n <span class="token operator">=</span> <span class="token number">3</span>
输出：4
解释：最多有 <span class="token number">5</span> 个 <span class="token number">0</span> 和 <span class="token number">3</span> 个 <span class="token number">1</span> 的最大子集是 <span class="token punctuation">{</span><span class="token string">&quot;10&quot;</span>,<span class="token string">&quot;0001&quot;</span>,<span class="token string">&quot;1&quot;</span>,<span class="token string">&quot;0&quot;</span><span class="token punctuation">}</span> 
</code></pre></div><div class="language-python extra-class"><pre class="language-python"><code><span class="token triple-quoted-string string">&quot;&quot;&quot;动态规划, 逐个扫描, dp[i][j] = max(dp[i][j], dp[i-zero#][j-one#]+1)

           [0, 0, 0, 0]                    [0, 0, 0, 0]
           [0, 1, 1, 1]                    [0, 1, 1, 1]
           [0, 1, 1, 1]                    [0, 1, 1, 1]
           [0, 1, 1, 1]                    [0, 1, 1, 1]
           [0, 1, 1, 1]                    [0, 1, 2, 2]
           [0, 1, 1, 1]                    [0, 1, 2, 2]
左边是第一个字符'10'扫完后符合要求的, 即m&gt;=1, n&gt;=1都符合
右边是第二个字符'0001'扫完后, 如果把前两个字符都加进来, 需要至少4个0和2个1, 因此只有m&gt;=4, n&gt;=2上才显示2
&quot;&quot;&quot;</span>

<span class="token keyword">def</span> <span class="token function">findMaxForm</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> strs<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">str</span><span class="token punctuation">]</span><span class="token punctuation">,</span> m<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">,</span> n<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">int</span><span class="token punctuation">:</span>
    dp <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">*</span><span class="token punctuation">(</span>n<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">for</span> _ <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>m<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token comment">#m 0' and n 1'</span>
    <span class="token keyword">for</span> x <span class="token keyword">in</span> strs<span class="token punctuation">:</span>
        zero<span class="token punctuation">,</span> one <span class="token operator">=</span> x<span class="token punctuation">.</span>count<span class="token punctuation">(</span><span class="token string">'0'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> x<span class="token punctuation">.</span>count<span class="token punctuation">(</span><span class="token string">'1'</span><span class="token punctuation">)</span>
        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>m<span class="token punctuation">,</span> zero<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> one<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token builtin">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>i<span class="token operator">-</span>zero<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token operator">-</span>one<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> dp<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>
</code></pre></div></div></div></div></div> <h2 id="_923-3sum-with-multiplicity"><a href="#_923-3sum-with-multiplicity" class="header-anchor">#</a> 923. 3Sum With Multiplicity</h2> <div class="custom-block tip"><p><strong>问题</strong>： 在一个数组中找出有多少组合的和是target</p> <p><strong>例子</strong>： 见下面答案是总共<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>20</mn></mrow><annotation encoding="application/x-tex">20</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord">0</span></span></span></span>种三个数组合加起来等于<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>8</mn></mrow><annotation encoding="application/x-tex">8</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">8</span></span></span></span></p> <div class="language-bash extra-class"><pre class="language-bash"><code>Input: A <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1,1</span>,2,2,3,3,4,4,5,5<span class="token punctuation">]</span>, target <span class="token operator">=</span> <span class="token number">8</span>
Output: <span class="token number">20</span>
Explanation: 
Enumerating by the values <span class="token punctuation">(</span>A<span class="token punctuation">[</span>i<span class="token punctuation">]</span>, A<span class="token punctuation">[</span>j<span class="token punctuation">]</span>, A<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">)</span>:
<span class="token punctuation">(</span><span class="token number">1</span>, <span class="token number">2</span>, <span class="token number">5</span><span class="token punctuation">)</span> occurs <span class="token number">8</span> <span class="token builtin class-name">times</span><span class="token punctuation">;</span>
<span class="token punctuation">(</span><span class="token number">1</span>, <span class="token number">3</span>, <span class="token number">4</span><span class="token punctuation">)</span> occurs <span class="token number">8</span> <span class="token builtin class-name">times</span><span class="token punctuation">;</span>
<span class="token punctuation">(</span><span class="token number">2</span>, <span class="token number">2</span>, <span class="token number">4</span><span class="token punctuation">)</span> occurs <span class="token number">2</span> <span class="token builtin class-name">times</span><span class="token punctuation">;</span>
<span class="token punctuation">(</span><span class="token number">2</span>, <span class="token number">3</span>, <span class="token number">3</span><span class="token punctuation">)</span> occurs <span class="token number">2</span> times.
</code></pre></div><details class="custom-block details"><summary>See More</summary> <p>传统做法是利用3-sum的解法, 先统计每个数的频率, 然后遍历这个计数器, 要求 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mn>1</mn></msub><mo>≤</mo><msub><mi>x</mi><mn>2</mn></msub><mo>≤</mo><msub><mi>x</mi><mn>3</mn></msub></mrow><annotation encoding="application/x-tex">x_1 \leq x_2 \leq x_3</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.7859700000000001em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.7859700000000001em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> and <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>∑</mo><mi>x</mi><mo>=</mo><mi>k</mi></mrow><annotation encoding="application/x-tex">\sum x = k</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1.00001em;vertical-align:-0.25001em;"></span><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">∑</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span>, 然后根据<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>x</mi><mn>2</mn></msub><mo separator="true">,</mo><msub><mi>x</mi><mn>3</mn></msub></mrow><annotation encoding="application/x-tex">x_1, x_2, x_3</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>的关系分类讨论, <code>choose N from K</code>这种, 这种方法对于3个数还算友好, 但如果不限制个数则不好做</p> <p>这里我们使用动态规划<code>dp[i][j][k]表示当前下标为i,和为j,已经用了k个数字的方案数%mod</code>, 转移方程为<code>dp[i][j][k] = (dp[i-1][j][k] + dp[i-1][j-arr[i]][k-1])%mod</code>, 我们期望得到用<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi><mo>=</mo><mn>3</mn></mrow><annotation encoding="application/x-tex">k=3</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">3</span></span></span></span>个数字, 总和为target=<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>j</mi></mrow><annotation encoding="application/x-tex">j</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.85396em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span></span></span></span>的答案个数</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">threeSumMulti</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> arr<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">,</span> target<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">int</span><span class="token punctuation">:</span>
    <span class="token comment"># dp[i][j][k] += dp[i-1][j-arr[i]][k-1]</span>
    n <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span> mod <span class="token operator">=</span> <span class="token number">10</span><span class="token operator">**</span><span class="token number">9</span> <span class="token operator">+</span> <span class="token number">7</span>
    dp <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">for</span> _ <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>target<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">]</span>  
    dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>
        cur <span class="token operator">=</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
        <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> cur<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">for</span> k <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">+=</span> dp<span class="token punctuation">[</span>j<span class="token operator">-</span>cur<span class="token punctuation">]</span><span class="token punctuation">[</span>k<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">&gt;=</span> mod<span class="token punctuation">)</span><span class="token punctuation">:</span> dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">-=</span> mod
    <span class="token keyword">return</span> dp<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>
</code></pre></div><p>动态规划如下</p> <div class="language- extra-class"><pre class="language-text"><code>输入： [1,3,3,0,1], target=4
启动： 生成 4 x (target+1) 的矩阵, 注意我们要初始化dp[0][0]=1, 第一行就这个作用, 使得arr[i]次数等于 1

scan i=0, arr[i]=1, 使用1个数字+总和等于1的答案是1
[0, 1, 0, 0, 0]
[0, 0, 0, 0, 0]
[0, 0, 0, 0, 0]

scan i=1, arr[i]=3, 第二排 4 - 3 在第一排中有一个值, 因此等于1, 对应[3,1]
[0, 1, 0, 1, 0]
[0, 0, 0, 0, 1]
[0, 0, 0, 0, 0]

scan i=2, arr[i]=3, 第二排 4 - 3 在第一排中有一个值, 因此加上1, 对应[3,1]
[0, 1, 0, 2, 0]
[0, 0, 0, 0, 2]
[0, 0, 0, 0, 0]

scan i=3, arr[i]=0, 第三排 4 - 0 在第二排中有两个值, 因此等于2, 对应两个[0,3,1]
[1, 1, 0, 2, 0]
[0, 1, 0, 2, 2]
[0, 0, 0, 0, 2]

scan i=4, arr[i]=1, 第三排 4 - 1 在第二排中有两个值, 因此加上2, 对应两个[1,0,3]
[1, 2, 0, 2, 0]
[0, 2, 1, 2, 4]
[0, 0, 1, 0, 4]
</code></pre></div></details></div> <hr><h2 id="_413-arithmetic-slices"><a href="#_413-arithmetic-slices" class="header-anchor">#</a> 413. Arithmetic Slices</h2> <div class="custom-block tip"><p class="custom-block-title">等差数列划分</p> <p><strong>问题</strong>： 找出一个数组有多少个等差数列(至少三个数)</p> <p><strong>例子</strong>： <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo>=</mo><mo stretchy="false">[</mo><mn>1</mn><mo separator="true">,</mo><mn>2</mn><mo separator="true">,</mo><mn>3</mn><mo separator="true">,</mo><mn>4</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">A = [1, 2, 3, 4]</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal">A</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">3</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">4</span><span class="mclose">]</span></span></span></span>, 有<code>[1,2,3]; [2,3,4]; [1,2,3,4]</code>四个等差数列，数列必须是连续数字，如果允许非连续会难很多</p> <p>首先如果暴力破解的话</p> <ul><li>找一个开头<code>s</code>, 找一个结尾<code>e=s+2</code>, 看<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo stretchy="false">[</mo><mi>s</mi><mo>+</mo><mn>1</mn><mo stretchy="false">]</mo><mo>−</mo><mi>A</mi><mo stretchy="false">[</mo><mi>s</mi><mo stretchy="false">]</mo><mo>=</mo><mo>=</mo><mi>A</mi><mo stretchy="false">[</mo><mi>s</mi><mo>+</mo><mn>2</mn><mo stretchy="false">]</mo><mo>−</mo><mi>A</mi><mo stretchy="false">[</mo><mi>s</mi><mo>+</mo><mn>1</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">A[s+1]-A[s]==A[s+2]-A[s+1]</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">A</span><span class="mopen">[</span><span class="mord mathnormal">s</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">A</span><span class="mopen">[</span><span class="mord mathnormal">s</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span></span><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">A</span><span class="mopen">[</span><span class="mord mathnormal">s</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">2</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">A</span><span class="mopen">[</span><span class="mord mathnormal">s</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">]</span></span></span></span>如果可以构成等差数列, 就继续往右挪动<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>e</mi></mrow><annotation encoding="application/x-tex">e</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">e</span></span></span></span>, 代表可以以<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi></mrow><annotation encoding="application/x-tex">s</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">s</span></span></span></span>为起点创建长度更长的等差数列</li> <li>一旦不行, 就停止挪动<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>e</mi></mrow><annotation encoding="application/x-tex">e</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">e</span></span></span></span>, 转而用新的起始点<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi></mrow><annotation encoding="application/x-tex">s</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">s</span></span></span></span>去找新的<code>difference</code></li></ul> <div class="language-python extra-class"><pre class="language-python"><code><span class="token triple-quoted-string string">&quot;&quot;&quot;注意动态规划可以进一步优化空间, 因为dp[i]只和dp[i-1]有关系, 所以不需要数组

A   1  3  5  7  9 15 20 25 28 29
dp  0  0  1  2  3  0  0  1  0  0
&quot;&quot;&quot;</span>                       
<span class="token keyword">def</span> <span class="token function">numberOfArithmeticSlices</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> A<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">int</span><span class="token punctuation">:</span>
    n <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>A<span class="token punctuation">)</span><span class="token punctuation">;</span> dp <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">*</span> n<span class="token punctuation">;</span> res <span class="token operator">=</span> <span class="token number">0</span>
    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> A<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">*</span><span class="token number">2</span> <span class="token operator">==</span> A<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">+</span>A<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
            dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span>
    <span class="token keyword">return</span> <span class="token builtin">sum</span><span class="token punctuation">(</span>dp<span class="token punctuation">)</span>
</code></pre></div><p><img src="/coding/assets/img/lc-413.786ea74a.png#center" alt="413. Arithmetic Slices"></p></div> <h2 id="_1105-filling-bookcase-shelves"><a href="#_1105-filling-bookcase-shelves" class="header-anchor">#</a> 1105. Filling Bookcase Shelves</h2> <div class="custom-block tip"><p class="custom-block-title">填充书架(需要一定回溯)</p> <p><strong>问题</strong>： 要求把书(不同厚度和高度)按照顺序放在一个书柜里(分层), 这个书架是有固定宽度的, 但是可以不断加层。</p> <p><strong>例子</strong>： books(宽度,高度) = <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mo stretchy="false">[</mo><mn>1</mn><mo separator="true">,</mo><mn>1</mn><mo stretchy="false">]</mo><mo separator="true">,</mo><mo stretchy="false">[</mo><mn>2</mn><mo separator="true">,</mo><mn>3</mn><mo stretchy="false">]</mo><mo separator="true">,</mo><mo stretchy="false">[</mo><mn>2</mn><mo separator="true">,</mo><mn>3</mn><mo stretchy="false">]</mo><mo separator="true">,</mo><mo stretchy="false">[</mo><mn>1</mn><mo separator="true">,</mo><mn>1</mn><mo stretchy="false">]</mo><mo separator="true">,</mo><mo stretchy="false">[</mo><mn>1</mn><mo separator="true">,</mo><mn>1</mn><mo stretchy="false">]</mo><mo separator="true">,</mo><mo stretchy="false">[</mo><mn>1</mn><mo separator="true">,</mo><mn>1</mn><mo stretchy="false">]</mo><mo separator="true">,</mo><mo stretchy="false">[</mo><mn>1</mn><mo separator="true">,</mo><mn>2</mn><mo stretchy="false">]</mo><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[[1,1],[2,3],[2,3],[1,1],[1,1],[1,1],[1,2]]</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mopen">[</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">1</span><span class="mclose">]</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mopen">[</span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">3</span><span class="mclose">]</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mopen">[</span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">3</span><span class="mclose">]</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mopen">[</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">1</span><span class="mclose">]</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mopen">[</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">1</span><span class="mclose">]</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mopen">[</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">1</span><span class="mclose">]</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mopen">[</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">2</span><span class="mclose">]</span><span class="mclose">]</span></span></span></span>, shelf_width = <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>4</mn></mrow><annotation encoding="application/x-tex">4</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">4</span></span></span></span>, 见下图</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token triple-quoted-string string">&quot;&quot;&quot;
用动态规划做, dp[i] = 放置前 i 本书的最小高度, 上一层的书也许应该放下来最好, 因为这一层目前只有一本书
    把当前这本书尽量放在同一层, 如果超了书柜的宽度, 则加一层
    取值范围注意一下, 最多1000本书, 最高1000, 所以dp[i]有最大值
    这道题不好用二分法, 原因看下图, 即使有高度限制, 怎么放还是有技巧
&quot;&quot;&quot;</span>
<span class="token keyword">def</span> <span class="token function">minHeightShelves</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> books<span class="token punctuation">:</span> List<span class="token punctuation">[</span>List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> shelf_width<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">int</span><span class="token punctuation">:</span>
    n <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>books<span class="token punctuation">)</span><span class="token punctuation">;</span> dp <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1000000</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token punctuation">(</span>n<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span>
    <span class="token keyword">for</span> i<span class="token punctuation">,</span> book <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>books<span class="token punctuation">)</span><span class="token punctuation">:</span>
        add_w <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> max_h <span class="token operator">=</span> <span class="token number">0</span>
        <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            add_w <span class="token operator">+=</span> books<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
            <span class="token keyword">if</span> add_w <span class="token operator">&gt;</span> shelf_width<span class="token punctuation">:</span>
                <span class="token keyword">break</span>
            max_h <span class="token operator">=</span> <span class="token builtin">max</span><span class="token punctuation">(</span>max_h<span class="token punctuation">,</span> books<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>                
            dp<span class="token punctuation">[</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token builtin">min</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">+</span> max_h<span class="token punctuation">)</span>
    <span class="token keyword">return</span> dp<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>
</code></pre></div><p><img src="/coding/assets/img/lc-1105.c2bf9465.png#center" alt=""></p></div> <h2 id="_1246-palindrome-removal"><a href="#_1246-palindrome-removal" class="header-anchor">#</a> 1246. Palindrome Removal</h2> <div class="custom-block tip"><p class="custom-block-title">删除回文子数组</p> <p><strong>问题</strong>： 每次可以删除一个回文子数组(不是子字符串, 就是说必须是邻近的才可以), 问多少次可以删除干净</p> <p><strong>例子</strong>： &quot;arr = [1,3,4,1,5]&quot;, 先先删除 &quot;[4]&quot;, 然后删除 &quot;[1,3,1]&quot;, 最后再删除 &quot;[5]&quot;</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token triple-quoted-string string">&quot;&quot;&quot;
主要是考虑 arr[i, j] 需要多少步
    如果 i=j, 我们可以直接考虑 arr[i+1, j-1] 
    但也不一定, 因为有可能 i 是和前面的某些字符串已经组成了 palindrome, 所以才会有倒数第二步取两个之间的最优
&quot;&quot;&quot;</span>
<span class="token keyword">def</span> <span class="token function">minimumMoves</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> A<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">int</span><span class="token punctuation">:</span>
    N <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>A<span class="token punctuation">)</span><span class="token punctuation">;</span> dp <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">*</span> N <span class="token keyword">for</span> _ <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>N<span class="token punctuation">)</span><span class="token punctuation">]</span>

    <span class="token keyword">def</span> <span class="token function">helper</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> j<span class="token operator">=</span>N<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> j <span class="token operator">&lt;</span> i<span class="token punctuation">:</span>  <span class="token keyword">return</span> <span class="token number">0</span>
        <span class="token keyword">if</span> j <span class="token operator">==</span> i<span class="token punctuation">:</span> <span class="token keyword">return</span> <span class="token number">1</span>
        <span class="token keyword">if</span> dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">:</span> <span class="token keyword">return</span> dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span>
        res<span class="token punctuation">,</span> tmp <span class="token operator">=</span> <span class="token builtin">float</span><span class="token punctuation">(</span><span class="token string">'inf'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span>
        <span class="token keyword">for</span> k <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">if</span> A<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> A<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">:</span>
                <span class="token keyword">if</span> k <span class="token operator">==</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">:</span>  <span class="token comment">#they are right next to each other</span>
                    tmp <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">+</span> helper<span class="token punctuation">(</span>k<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> j<span class="token punctuation">)</span>
                <span class="token keyword">else</span><span class="token punctuation">:</span>
                    tmp <span class="token operator">=</span> helper<span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> k<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> helper<span class="token punctuation">(</span>k<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> j<span class="token punctuation">)</span>
                res <span class="token operator">=</span> <span class="token builtin">min</span><span class="token punctuation">(</span>res<span class="token punctuation">,</span> tmp<span class="token punctuation">)</span>
        dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> res <span class="token operator">=</span> <span class="token builtin">min</span><span class="token punctuation">(</span>res<span class="token punctuation">,</span> <span class="token number">1</span> <span class="token operator">+</span> helper<span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> res
    
    <span class="token keyword">return</span> helper<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p><img src="/coding/assets/img/lc-1246.cc434be3.png#center" alt=""></p></div></div> <footer class="page-edit" style="display:none;"><!----> <div class="last-updated"><span class="prefix">最后更新时间: </span> <span class="time">4/6/2021, 12:08:48 AM</span></div></footer> <!----> <!----></main> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div></div></div>
    <script src="/coding/assets/js/app.069c872b.js" defer></script><script src="/coding/assets/js/4.42152b27.js" defer></script><script src="/coding/assets/js/1.41496a03.js" defer></script><script src="/coding/assets/js/32.aab5bb1b.js" defer></script>
  </body>
</html>
